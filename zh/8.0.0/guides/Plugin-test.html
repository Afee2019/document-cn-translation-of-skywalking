<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>插件自动测试框架</title>
    <meta name="description" content="">
    
    
    <link rel="preload" href="/document-cn-translation-of-skywalking/assets/css/0.styles.3c47f5b2.css" as="style"><link rel="preload" href="/document-cn-translation-of-skywalking/assets/js/app.8a9ee25f.js" as="script"><link rel="preload" href="/document-cn-translation-of-skywalking/assets/js/320.ec15dc0a.js" as="script"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/10.05f4d562.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/100.2b4b320e.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/101.2f0aef2e.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/102.3ceac7d7.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/103.245ec86e.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/104.afd02dc1.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/105.2bc86393.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/106.62f5b116.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/107.11d1fa1c.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/108.70d558a5.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/109.4b4f243d.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/11.86bcf4ca.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/110.f9e7f979.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/111.fea48d33.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/112.a04d251d.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/113.8eb02efd.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/114.43f60f45.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/115.a62f7c3a.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/116.54607da8.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/117.5fbbdcf7.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/118.91ba0e84.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/119.861aa5ea.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/12.a9a79b0f.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/120.b2e3222e.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/121.3a57997c.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/122.d8e56335.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/123.c1bad848.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/124.fb15bd99.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/125.5168d64b.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/126.f4809d4d.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/127.8d778662.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/128.62df393a.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/129.d50914c1.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/13.99223498.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/130.b4b33fd3.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/131.ea09d096.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/132.3d1fd52d.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/133.3af46e14.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/134.00187de4.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/135.a3422539.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/136.9b950b19.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/137.fa97962d.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/138.4769ab13.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/139.517c1951.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/14.7984e7a1.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/140.485ddf79.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/141.dd2ed749.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/142.63da5061.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/143.0a9b60c5.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/144.76d23801.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/145.059dfda9.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/146.afc25873.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/147.3afcd4b5.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/148.0a046f0b.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/149.4fd94f91.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/15.1f0b4f35.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/150.ce62fc18.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/151.4f483473.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/152.9911105f.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/153.ec5731b7.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/154.13a49292.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/155.b1ba052a.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/156.74c46024.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/157.28447db9.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/158.5cb1e584.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/159.0d63b913.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/16.dcb9ee0b.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/160.0c577cc6.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/161.030de636.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/162.aa26292c.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/163.bb841df8.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/164.7e58f334.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/165.dd26aebe.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/166.16745ab6.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/167.22832adb.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/168.d90ef4ac.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/169.99c554c5.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/17.7550defd.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/170.34ff6985.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/171.ac085cca.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/172.b15e3bf7.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/173.5a0a406d.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/174.ee995fdc.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/175.8efe75cc.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/176.b876b963.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/177.bde06237.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/178.5e769579.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/179.1f913c78.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/18.9a528c6a.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/180.fffd101b.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/181.906a2c5d.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/182.6d27aa12.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/183.0465413c.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/184.dc3ff2c8.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/185.8598611b.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/186.3c5a8335.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/187.e1d5e971.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/188.6f54338f.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/189.672d54cf.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/19.1d55f3ea.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/190.82ffb15c.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/191.b36b581f.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/192.0e871490.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/193.97399bc5.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/194.0a54cb8d.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/195.4a6aedc7.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/196.0e51c44f.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/197.1cfc3524.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/198.0120f2d2.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/199.b3120085.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/2.15dd49b4.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/20.f1208945.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/200.0a4e1427.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/201.acb4ce09.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/202.7393906f.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/203.4f2636cd.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/204.bbde8407.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/205.9f5300c4.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/206.461b5c3a.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/207.2f4a2d0b.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/208.e9cb4382.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/209.eec211e4.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/21.920585d1.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/210.34cf833a.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/211.ac8cd040.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/212.92069c20.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/213.99998b39.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/214.2876590f.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/215.635371ed.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/216.20052a65.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/217.e8bb442a.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/218.5dc55560.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/219.e048a73d.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/22.5c712693.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/220.a0558f2b.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/221.7990979d.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/222.40dd78ff.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/223.30a40fe6.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/224.67359796.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/225.fd3ad155.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/226.25a163c1.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/227.16f5c1a1.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/228.ee33ca3d.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/229.9352f171.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/23.15d4619a.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/230.e633cd1c.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/231.23b36418.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/232.c189cb15.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/233.e46d5047.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/234.ced1299e.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/235.6816124a.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/236.c64546e0.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/237.519e157d.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/238.73217b92.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/239.06ea7a85.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/24.0a69c4c1.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/240.dd7a2edd.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/241.dad9d2c5.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/242.2c69ec49.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/243.03060a5d.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/244.9dff3d08.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/245.9a168dac.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/246.27048019.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/247.bd90517d.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/248.03a32c3e.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/249.6c09cf12.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/25.e28dd3c0.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/250.e7a77484.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/251.ce230e55.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/252.e6dfc621.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/253.9d60019b.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/254.8a84850e.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/255.fa9a3631.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/256.e217df77.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/257.4affa218.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/258.9ca7011a.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/259.55603ab7.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/26.46512202.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/260.7832fbda.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/261.99e20708.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/262.42b1bfaa.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/263.c305017f.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/264.81b4686a.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/265.2a27c8d6.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/266.67cced1b.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/267.cc93cd88.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/268.33eb605c.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/269.c8438233.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/27.309f4691.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/270.7d7afb92.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/271.1a37f674.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/272.3364fd40.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/273.4aa7f097.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/274.4985c233.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/275.24c136ef.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/276.0389e214.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/277.de1d2a1d.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/278.35735ff5.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/279.d161ea6b.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/28.01360d6f.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/280.eb34b3d2.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/281.133da4f5.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/282.f83678b6.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/283.fc1c1aa7.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/284.855f706e.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/285.f6a33e01.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/286.2d8d74ca.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/287.8dcd580e.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/288.bb7f197c.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/289.8f484ce8.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/29.6fde7762.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/290.83522441.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/291.0efb54c8.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/292.448bfdbb.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/293.e7d375f6.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/294.696c6532.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/295.9917af2b.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/296.358ed9e9.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/297.11d2fe17.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/298.3a9bfe36.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/299.4777866c.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/3.e791941a.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/30.cc03ae76.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/300.a12a7cc2.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/301.57737d05.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/302.4a0ef7b8.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/303.09b4943b.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/304.8477a6db.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/305.6f3515fa.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/306.a83db801.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/307.a0c2c861.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/308.bae0e35d.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/309.540ab740.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/31.37b778a1.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/310.fbe15cfd.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/311.c2a86464.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/312.ad7170db.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/313.3ed90720.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/314.e435541c.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/315.d385cdf4.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/316.dad497cc.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/317.07158d5a.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/318.c6ed961c.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/319.373624f0.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/32.8b0362f3.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/321.d07d62ed.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/322.e38ab9ba.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/323.65591070.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/324.2d026787.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/325.c447a1bb.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/326.4877b5c4.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/327.5f479e9e.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/328.b20d3454.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/329.07ed1cc6.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/33.1c4e96da.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/330.0ea6eb6b.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/331.7b5478ed.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/332.20570639.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/333.ccdb40e8.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/334.0e22d67e.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/335.894ceed6.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/336.3d6da43d.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/337.1f5d9711.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/338.cfe0acd2.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/339.8c0a3dea.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/34.fbdfdf9f.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/340.2f3fbf23.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/341.80492f4e.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/342.06e740e6.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/343.d26bbf7c.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/344.aa89e880.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/345.32b173d1.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/346.0d81a144.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/347.40345b93.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/348.b6de4efb.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/349.900d7d42.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/35.b28b06f0.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/350.d0ff6ab0.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/351.12125bfc.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/352.c320e9ae.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/353.ddc5fd56.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/354.831fd98e.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/355.1c239953.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/356.08851dc8.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/357.fe3311cd.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/358.67cd4804.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/359.8cb610b0.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/36.84486bea.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/360.0fa33d3d.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/361.0a6fd67c.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/362.52ffc56d.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/363.0c197e32.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/364.a5d0a727.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/365.5ba0dcf1.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/366.8b50b66d.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/367.83573222.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/368.ac8c0318.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/369.f4abe476.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/37.998521a7.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/370.33d20d6a.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/371.843bbd44.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/372.4ec6042c.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/373.dda29b54.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/374.c5d1b3d3.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/375.8680ca60.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/376.e98e06f6.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/377.b7570554.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/378.d07ac36c.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/379.e0df92c2.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/38.c43c01e3.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/380.f267bb85.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/381.c12b8cd8.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/382.0ab60f61.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/383.207abfa0.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/384.35b64532.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/385.8822a58a.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/386.3e5423c1.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/387.32024bbf.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/388.d610b540.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/39.c5cab9ec.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/4.2dc60b69.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/40.c8446e3f.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/41.1dde7d1b.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/42.d0736133.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/43.da684e9e.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/44.3efa43e6.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/45.40ed4f41.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/46.ab0fb96a.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/47.ab04cb26.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/48.fcf31dad.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/49.41ceabf6.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/5.171d1bab.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/50.20330e9a.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/51.fabfd7ba.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/52.a730b904.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/53.cec64aec.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/54.737cfb38.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/55.d85d167a.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/56.671ada7f.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/57.47c619c8.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/58.eedb0aeb.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/59.2f7ab17c.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/6.6ae55923.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/60.77ec5a24.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/61.ca0c5904.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/62.4fabbcff.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/63.9aa33110.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/64.0bf2e436.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/65.f5ec1ad7.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/66.aecec398.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/67.e0d2b888.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/68.abf49043.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/69.e691b698.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/7.49caad6f.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/70.5a8f10f0.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/71.5de14941.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/72.f885c1b3.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/73.6cfa35c5.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/74.93263a78.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/75.6a222109.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/76.27782322.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/77.c8c0e33b.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/78.6ac29f97.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/79.aa733517.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/8.6ffbc3d6.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/80.7d194465.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/81.5beb9305.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/82.f0b84821.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/83.e4aaab83.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/84.8433163b.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/85.5eaa1f13.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/86.16874b0a.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/87.c4884c40.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/88.042fac25.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/89.767bd716.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/9.708a3c06.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/90.b286fcb2.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/91.c66d77b9.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/92.fddf060f.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/93.427eefac.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/94.6ef7603d.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/95.6d1eca94.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/96.274bf849.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/97.4a94afc7.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/98.c55bb7ba.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/99.8f08b54b.js">
    <link rel="stylesheet" href="/document-cn-translation-of-skywalking/assets/css/0.styles.3c47f5b2.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/document-cn-translation-of-skywalking/" class="home-link router-link-active"></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><!---->  <!----> </div> <div class="page"> <div class="content"><h1 id="插件自动测试框架"><a href="#插件自动测试框架" class="header-anchor">#</a> 插件自动测试框架</h1> <p>插件测试框架旨在验证插件的功能和兼容状态。由于有数十个插件和数百个版本需要验证，因此无法手动进行。
测试框架使用基于容器的技术堆栈，需要一组安装了代理程序的真实服务，然后运行测试模拟OAP后端以检查从代理程序发送的分段数据。
主仓库中维护的每个插件都需要相应的测试用例，并且还与受支持的列表文档中的版本匹配。</p> <h2 id="环境要求"><a href="#环境要求" class="header-anchor">#</a> 环境要求</h2> <ol><li>MacOS/Linux</li> <li>jdk 8+</li> <li>Docker</li> <li>Docker Compose</li></ol> <h2 id="用例库镜像简介"><a href="#用例库镜像简介" class="header-anchor">#</a> 用例库镜像简介</h2> <p>该测试框架提供了 <code>JVM-container</code> 和 <code>Tomcat-container</code> 基础镜像。您可以为您的测试用例选择合适的一个，如果其中一个合适，建议选择<code>JVM-container</code> 。</p> <h3 id="jvm容器镜像简介"><a href="#jvm容器镜像简介" class="header-anchor">#</a> JVM容器镜像简介</h3> <p><a href="../../../test/plugin/containers/jvm-container">JVM-container</a> 使用 <code>openjdk:8</code> 作为基础镜像。
必须使用“ mvn clean package”将测试用例项目打包为“ project-name.zip”，包括“ startup.sh”和uber jar。</p> <p>以以下测试项目为例</p> <ul><li><a href="../../../test/plugin/scenarios/sofarpc-scenario">sofarpc-scenario</a>作为单个项目用例。</li> <li><a href="../../../test/plugin/scenarios/webflux-scenario">webflux-scenario</a> 作为包括多个项目的用例。</li></ul> <h3 id="tomcat容器镜像简介"><a href="#tomcat容器镜像简介" class="header-anchor">#</a> Tomcat容器镜像简介</h3> <p><a href="../../../test/plugin/containers/tomcat-container">Tomcat-container</a> 使用 <code>tomcat:8.5.42-jdk8-openjdk</code> 作为基础镜像。
必须使用 <code>mvn package</code> 将测试用例项目打包为 <code>project-name.war</code>。</p> <p>Take the following test project as a good example</p> <ul><li><a href="https://github.com/apache/skywalking/tree/master/test/plugin/scenarios/spring-4.3.x-scenario" target="_blank" rel="noopener noreferrer">spring-4.3.x-scenario<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <h2 id="测试项目层次结构"><a href="#测试项目层次结构" class="header-anchor">#</a> 测试项目层次结构</h2> <p>该测试用例是一个独立的Maven项目，需要将其打包为war tar 文件或zip文件，具体取决于所选的基本镜像。此外，还需要两个外部可访问端点，主要是两个URL。</p> <p>所有的测试用例代码都应该在<code>org.apache.skywalking.apm.testcase</code>包中，除非期望使用某些代码，否则这些类可以在<code>test.org.apache.skywalking.apm.testcase</code>包中。</p> <p><strong>JVM容器测试项目层次结构</strong></p> <div class="language- extra-class"><pre class="language-text"><code>[plugin-scenario]
    |- [bin]
        |- startup.sh
    |- [config]
        |- expectedData.yaml
    |- [src]
        |- [main]
            |- ...
        |- [resource]
            |- log4j2.xml
    |- pom.xml
    |- configuration.yaml
    |- support-version.list

[] = directory
</code></pre></div><p><strong>Tomcat容器测试项目层次结构</strong></p> <div class="language- extra-class"><pre class="language-text"><code>[plugin-scenario]
    |- [config]
        |- expectedData.yaml
    |- [src]
        |- [main]
            |- ...
        |- [resource]
            |- log4j2.xml
        |- [webapp]
            |- [WEB-INF]
                |- web.xml
    |- pom.xml
    |- configuration.yaml
    |- support-version.list

[] = directory
</code></pre></div><h2 id="测试用例配置文件"><a href="#测试用例配置文件" class="header-anchor">#</a> 测试用例配置文件</h2> <p>每个测试用例都需要以下文件。</p> <table><thead><tr><th>文件名</th> <th>内容描述</th></tr></thead> <tbody><tr><td><code>configuration.yml</code></td> <td>声明基本的测试用例介绍, 包括, 用例名称, 入口端点，模式，依赖项。</td></tr> <tr><td><code>expectedData.yaml</code></td> <td>描述预期的追踪段数据。</td></tr> <tr><td><code>support-version.list</code></td> <td>列出此用例的目标版本。</td></tr> <tr><td><code>startup.sh</code></td> <td>仅仅在<code>JVM-container</code> 中需要, 当使用<code>Tomcat-container</code>时不需要。</td></tr></tbody></table> <p><code>*</code> <code>support-version.list</code> 格式要求每一行是个单独版本。可以使用<code>＃</code>来注释该版本。</p> <h3 id="configuration-yml"><a href="#configuration-yml" class="header-anchor">#</a> configuration.yml</h3> <table><thead><tr><th>参数</th> <th>描述</th></tr></thead> <tbody><tr><td>type</td> <td>镜像类型, 可选 <code>jvm</code> 或者 <code>tomcat</code>。必填。</td></tr> <tr><td>entryService</td> <td>用于测试用例访问的入口端点(URL)。必填。 (HTTP Method: GET)</td></tr> <tr><td>healthCheck</td> <td>用于测试用例健康检查的端点(URL)。必填。 (HTTP Method: HEAD)</td></tr> <tr><td>startScript</td> <td>启动脚本的路径。仅在镜像类型为jvm(<code>type: jvm</code>)时必填。</td></tr> <tr><td>framework</td> <td>用例名称.</td></tr> <tr><td>runningMode</td> <td>运行模式是否带有可选插件,可选, 默认<code>default</code>, <code>with_optional</code>, <code>with_bootstrap</code></td></tr> <tr><td>withPlugins</td> <td>插件选择规则。例:<code>apm-spring-annotation-plugin-*.jar</code>。当 <code>runningMode=with_optional</code> 或 <code>runningMode=with_bootstrap</code>必填。</td></tr> <tr><td>environment</td> <td>例如<code>docker-compose#environment</code>.</td></tr> <tr><td>depends_on</td> <td>例如<code>docker-compose#depends_on</code>.</td></tr> <tr><td>dependencies</td> <td>例如<code>docker-compose#services</code>, 支持<code>image、links、hostname、environment、depends_on</code>。</td></tr></tbody></table> <p><strong>注意：仅当<code>dependencies</code>为空时，<code>docker-compose</code>才有效。</strong></p> <p><strong>runningMode</strong>选项说明。</p> <table><thead><tr><th>选项</th> <th>描述</th></tr></thead> <tbody><tr><td>default</td> <td>激活<code>plugin</code>文件夹中的所有插件，例如官方发行的插件。</td></tr> <tr><td>with_optional</td> <td>激活<code>default</code>模式和<code>optional-plugin</code>文件夹里面的通过指定选择器指定的插件。</td></tr> <tr><td>with_bootstrap</td> <td>激活<code>default</code>模式和<code>bootstrap-plugin</code>文件夹里面的通过指定选择器指定的插件。</td></tr></tbody></table> <p>with_optional/with_bootstrap 支持多个选择器,以<code>;</code>分割.</p> <p><strong>文件格式</strong></p> <div class="language- extra-class"><pre class="language-text"><code>type:
entryService:
healthCheck:
startScript:
framework:
runningMode:
withPlugins:
environment:
  ...
depends_on:
  ...
dependencies:
  service1:
    image:
    hostname:
    expose:
      ...
    environment:
      ...
    depends_on:
      ...
    links:
      ...
    entrypoint:
      ...
    healthcheck:
      ...
</code></pre></div><ul><li>依赖项支持docker撰写<code>healthcheck</code>。但是格式略有不同。我们需要将-作为每个配置项的开头，并将其描述为字符串行。</li></ul> <p>例如在官方文档中，健康检查是</p> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token key atrule">healthcheck</span><span class="token punctuation">:</span>
  <span class="token key atrule">test</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;CMD&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;curl&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;-f&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;http://localhost&quot;</span><span class="token punctuation">]</span>
  <span class="token key atrule">interval</span><span class="token punctuation">:</span> 1m30s
  <span class="token key atrule">timeout</span><span class="token punctuation">:</span> 10s
  <span class="token key atrule">retries</span><span class="token punctuation">:</span> <span class="token number">3</span>
  <span class="token key atrule">start_period</span><span class="token punctuation">:</span> 40s
</code></pre></div><p>在这里，应该写成</p> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token key atrule">healthcheck</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">'test</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;CMD&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;curl&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;-f&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;http://localhost&quot;</span><span class="token punctuation">]</span>'
  <span class="token punctuation">-</span> <span class="token key atrule">&quot;interval</span><span class="token punctuation">:</span> 1m30s&quot;
  <span class="token punctuation">-</span> <span class="token key atrule">&quot;timeout</span><span class="token punctuation">:</span> 10s&quot;
  <span class="token punctuation">-</span> <span class="token key atrule">&quot;retries</span><span class="token punctuation">:</span> 3&quot;
  <span class="token punctuation">-</span> <span class="token key atrule">&quot;start_period</span><span class="token punctuation">:</span> 40s&quot;
</code></pre></div><p>在某些情况下，需要依赖服务（主要是第三方服务器，例如SolrJ服务器）来保持与客户端库版本相同的版本，该库在pom中定义为<code>$ {test.framework.version}</code>。
可以将<code>${CASE_SERVER_IMAGE_VERSION}</code>用作版本号，它将在测试中针对每个版本进行更改。</p> <blockquote><p>不支持与资源相关的配置，例如卷，端口和ulimit。因为在测试场景中
不需要将任何端口映射到主机VM，也无需安装任何文件夹。</p></blockquote> <p><strong>以以下测试用例可以作为参考</strong></p> <ul><li><a href="../../../test/plugin/scenarios/dubbo-2.7.x-scenario/configuration.yml">dubbo-2.7.x with JVM-container</a></li> <li><a href="../../../test/plugin/scenarios/jetty-scenario/configuration.yml">jetty with JVM-container</a></li> <li><a href="../../../test/plugin/scenarios/gateway-2.1.x-scenario/configuration.yml">gateway with runningMode</a></li> <li><a href="../../../test/plugin/scenarios/canal-scenario/configuration.yml">canal with docker-compose</a></li></ul> <h3 id="expecteddata-yaml"><a href="#expecteddata-yaml" class="header-anchor">#</a> expectedData.yaml</h3> <p><strong>数字运算符</strong></p> <table><thead><tr><th style="text-align:left">运算符</th> <th style="text-align:left">描述</th></tr></thead> <tbody><tr><td style="text-align:left"><code>nq</code></td> <td style="text-align:left">!=</td></tr> <tr><td style="text-align:left"><code>eq</code></td> <td style="text-align:left">==(默认情况下)</td></tr> <tr><td style="text-align:left"><code>ge</code></td> <td style="text-align:left">&gt;=</td></tr> <tr><td style="text-align:left"><code>gt</code></td> <td style="text-align:left">&gt;</td></tr></tbody></table> <p><strong>字符串运算符</strong></p> <table><thead><tr><th style="text-align:left">运算符</th> <th style="text-align:left">描述</th></tr></thead> <tbody><tr><td style="text-align:left"><code>not null</code></td> <td style="text-align:left">不为空</td></tr> <tr><td style="text-align:left"><code>null</code></td> <td style="text-align:left">空或者空字符串</td></tr> <tr><td style="text-align:left"><code>eq</code></td> <td style="text-align:left">等于(默认情况下)</td></tr></tbody></table> <p><strong>细分目标描述格式</strong></p> <div class="language-yml extra-class"><pre class="language-yml"><code><span class="token key atrule">segmentItems</span><span class="token punctuation">:</span>
<span class="token punctuation">-</span>
  <span class="token key atrule">serviceName</span><span class="token punctuation">:</span> SERVICE_NAME(string)
  <span class="token key atrule">segmentSize</span><span class="token punctuation">:</span> SEGMENT_SIZE(int)
  <span class="token key atrule">segments</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">segmentId</span><span class="token punctuation">:</span> SEGMENT_ID(string)
    <span class="token key atrule">spans</span><span class="token punctuation">:</span>
        <span class="token punctuation">...</span>
</code></pre></div><table><thead><tr><th>属性</th> <th>描述</th></tr></thead> <tbody><tr><td>serviceName</td> <td>服务名称。</td></tr> <tr><td>segmentSize</td> <td>预期的目标数量。</td></tr> <tr><td>segmentId</td> <td>链路ID。</td></tr> <tr><td>spans</td> <td>追踪段跨度列表。遵循下一部分，以了解如何描述每个跨度。</td></tr></tbody></table> <p><strong>跨度验证描述格式</strong></p> <p><strong>注意</strong>：跨度列表的顺序应遵循跨度完成时间的顺序。</p> <div class="language-yml extra-class"><pre class="language-yml"><code>    <span class="token key atrule">operationName</span><span class="token punctuation">:</span> OPERATION_NAME(string)
    <span class="token key atrule">parentSpanId</span><span class="token punctuation">:</span> PARENT_SPAN_ID(int)
    <span class="token key atrule">spanId</span><span class="token punctuation">:</span> SPAN_ID(int)
    <span class="token key atrule">startTime</span><span class="token punctuation">:</span> START_TIME(int)
    <span class="token key atrule">endTime</span><span class="token punctuation">:</span> END_TIME(int)
    <span class="token key atrule">isError</span><span class="token punctuation">:</span> <span class="token key atrule">IS_ERROR(string</span><span class="token punctuation">:</span> <span class="token boolean important">true</span><span class="token punctuation">,</span> false)
    <span class="token key atrule">spanLayer</span><span class="token punctuation">:</span> <span class="token key atrule">SPAN_LAYER(string</span><span class="token punctuation">:</span> DB<span class="token punctuation">,</span> RPC_FRAMEWORK<span class="token punctuation">,</span> HTTP<span class="token punctuation">,</span> MQ<span class="token punctuation">,</span> CACHE)
    <span class="token key atrule">spanType</span><span class="token punctuation">:</span> <span class="token key atrule">SPAN_TYPE(string</span><span class="token punctuation">:</span> Exit<span class="token punctuation">,</span> Entry<span class="token punctuation">,</span> Local)
    <span class="token key atrule">componentId</span><span class="token punctuation">:</span> COMPONENT_ID(int)
    <span class="token key atrule">tags</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token punctuation">{</span><span class="token key atrule">key</span><span class="token punctuation">:</span> TAG_KEY(string)<span class="token punctuation">,</span> <span class="token key atrule">value</span><span class="token punctuation">:</span> TAG_VALUE(string)<span class="token punctuation">}</span>
    <span class="token punctuation">...</span>
    <span class="token key atrule">logs</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token punctuation">{</span><span class="token key atrule">key</span><span class="token punctuation">:</span> LOG_KEY(string)<span class="token punctuation">,</span> <span class="token key atrule">value</span><span class="token punctuation">:</span> LOG_VALUE(string)<span class="token punctuation">}</span>
    <span class="token punctuation">...</span>
    <span class="token key atrule">peer</span><span class="token punctuation">:</span> PEER(string)
    <span class="token key atrule">refs</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token punctuation">{</span>
       <span class="token key atrule">traceId</span><span class="token punctuation">:</span> TRACE_ID(string)<span class="token punctuation">,</span>
       <span class="token key atrule">parentTraceSegmentId</span><span class="token punctuation">:</span> PARENT_TRACE_SEGMENT_ID(string)<span class="token punctuation">,</span>
       <span class="token key atrule">parentSpanId</span><span class="token punctuation">:</span> PARENT_SPAN_ID(int)<span class="token punctuation">,</span>
       <span class="token key atrule">parentService</span><span class="token punctuation">:</span> PARENT_SERVICE(string)<span class="token punctuation">,</span>
       <span class="token key atrule">parentServiceInstance</span><span class="token punctuation">:</span> PARENT_SERVICE_INSTANCE(string)<span class="token punctuation">,</span>
       <span class="token key atrule">parentEndpoint</span><span class="token punctuation">:</span> PARENT_ENDPOINT_NAME(string)<span class="token punctuation">,</span>
       <span class="token key atrule">networkAddress</span><span class="token punctuation">:</span> NETWORK_ADDRESS(string)<span class="token punctuation">,</span>
       <span class="token key atrule">refType</span><span class="token punctuation">:</span>  <span class="token key atrule">REF_TYPE(string</span><span class="token punctuation">:</span> CrossProcess<span class="token punctuation">,</span> CrossThread)
     <span class="token punctuation">}</span>
   <span class="token punctuation">...</span>
</code></pre></div><table><thead><tr><th>属性</th> <th>描述</th></tr></thead> <tbody><tr><td>operationName</td> <td>跨度操作名称。</td></tr> <tr><td>parentSpanId</td> <td>父跨度ID。 <strong>注意</strong>: 第一个跨度的父跨度ID应该为-1。</td></tr> <tr><td>spanId</td> <td>跨度ID. <strong>注意</strong>, 从0开始。</td></tr> <tr><td>startTime</td> <td>跨度开始时间。 无法获得准确的时间，非0。</td></tr> <tr><td>endTime</td> <td>跨度结束时间。无法获得准确的时间，非0。</td></tr> <tr><td>isError</td> <td>跨度状态, true 或者 false.</td></tr> <tr><td>componentId</td> <td>插件的组件ID。</td></tr> <tr><td>tags</td> <td>跨度的标签列表。 <strong>注意</strong>,保持与插件编码相同的顺序。</td></tr> <tr><td>logs</td> <td>跨度的日志列表。 <strong>注意</strong>,保持与插件编码相同的顺序。</td></tr> <tr><td>SpanLayer</td> <td>可选项, DB, RPC_FRAMEWORK, HTTP, MQ, CACHE.</td></tr> <tr><td>SpanType</td> <td>跨度类型, 可选项, Exit、Entry 或 Local.</td></tr> <tr><td>peer</td> <td>远端网络地址, 大部分情况下是IP +端口。对于Exit跨度，这是必需的。</td></tr></tbody></table> <p>SegmentRef的验证描述</p> <table><thead><tr><th>属性</th> <th>描述</th></tr></thead> <tbody><tr><td>traceId</td> <td>链路ID</td></tr> <tr><td>parentTraceSegmentId</td> <td>父追踪段ID，指向父追踪段中的追踪段ID。</td></tr> <tr><td>parentSpanId</td> <td>父跨度ID, 指向父追踪段中跨度的跨度ID。</td></tr> <tr><td>parentService</td> <td>父/下游服务的名称。</td></tr> <tr><td>parentServiceInstance</td> <td>父/下游服务实例的名称。</td></tr> <tr><td>parentEndpoint</td> <td>父/下游服务的端点。</td></tr> <tr><td>networkAddress</td> <td>父出口跨度的远端网络地址。</td></tr> <tr><td>refType</td> <td>引用类型, 可选项, 跨进程 或 跨线程.</td></tr></tbody></table> <h3 id="startup-sh"><a href="#startup-sh" class="header-anchor">#</a> startup.sh</h3> <p>该脚本提供了基于JVM的服务的起点，其中大多数以带有一些变量的<code>java -jar</code>开始。 Shell中提供了以下系统环境变量。</p> <table><thead><tr><th style="text-align:left">变量</th> <th style="text-align:left">描述</th></tr></thead> <tbody><tr><td style="text-align:left">agent_opts</td> <td style="text-align:left">选择代理插件，请检查插件文档中的详细信息或此PR中添加的相同选项。</td></tr> <tr><td style="text-align:left">SCENARIO_NAME</td> <td style="text-align:left">服务名称。默认与用例文件夹名称相同</td></tr> <tr><td style="text-align:left">SCENARIO_VERSION</td> <td style="text-align:left">版本</td></tr> <tr><td style="text-align:left">SCENARIO_ENTRY_SERVICE</td> <td style="text-align:left">进入此服务的入口URL</td></tr> <tr><td style="text-align:left">SCENARIO_HEALTH_CHECK_URL</td> <td style="text-align:left">健康检查的URL</td></tr></tbody></table> <blockquote><p><code>${agent_opts}</code> 必须添加到你的 <code>java -jar</code> 命令行, 其中包括测试框架注入的参数, 和
保证探针能被加载。 所有其他参数应在之后 <code>${agent_opts}</code>添加.</p></blockquote> <p>测试框架默认情况下会将服务名称设置为测试用例文件夹名称，但是在某些情况下，需要多个测试项目才能以不同的服务代码运行，可以像以下示例一样显式设置它。</p> <p>示例</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token assign-left variable">home</span><span class="token operator">=</span><span class="token string">&quot;$(cd &quot;<span class="token variable"><span class="token variable">$(</span><span class="token function">dirname</span> $0<span class="token variable">)</span></span>&quot;</span><span class="token punctuation">;</span> <span class="token builtin class-name">pwd</span><span class="token punctuation">)</span><span class="token string">&quot;

java -jar <span class="token variable">${agent_opts}</span> &quot;</span>-Dskywalking.agent.service_name<span class="token operator">=</span>jettyserver-scenario<span class="token string">&quot; <span class="token variable">${home}</span>/../libs/jettyserver-scenario.jar &amp;
sleep 1

java -jar <span class="token variable">${agent_opts}</span> &quot;</span>-Dskywalking.agent.service_name<span class="token operator">=</span>jettyclient-scenario&quot;  <span class="token variable">${home}</span>/<span class="token punctuation">..</span>/libs/jettyclient-scenario.jar <span class="token operator">&amp;</span>

</code></pre></div><blockquote><p>仅在确实需要时设置此选项或使用其他SkyWalking选项。</p></blockquote> <p><strong>以以下测试用例为例</strong></p> <ul><li><a href="../../../test/plugin/scenarios/undertow-scenario/bin/startup.sh">undertow</a></li> <li><a href="../../../test/plugin/scenarios/webflux-scenario/webflux-dist/bin/startup.sh">webflux</a></li></ul> <h2 id="最佳实践"><a href="#最佳实践" class="header-anchor">#</a> 最佳实践</h2> <h3 id="如何使用原型创建测试用例项目"><a href="#如何使用原型创建测试用例项目" class="header-anchor">#</a> 如何使用原型创建测试用例项目</h3> <p>我们提供了原型和脚本，使创建项目更加容易。它创建了一个完整的测试用例项目。
这样我们只需要关注用例。首先，我们可以关注以下命令来获取有关脚本的用法。</p> <p><code>bash ${SKYWALKING_HOME}/test/plugin/generator.sh</code></p> <p>然后运行并在<code>./scenarios</code>中生成一个以<code>scenario_name</code>的项目。</p> <h3 id="推荐pom"><a href="#推荐pom" class="header-anchor">#</a> 推荐Pom</h3> <div class="language-xml extra-class"><pre class="language-xml"><code>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>properties</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- 在pom中提供和使用此属性. --&gt;</span>
        <span class="token comment">&lt;!-- 此版本应与库版本匹配, --&gt;</span>
        <span class="token comment">&lt;!-- 在这种情况下，http组件库版本为4.3. --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>test.framework.version</span><span class="token punctuation">&gt;</span></span>4.3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>test.framework.version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>properties</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.apache.httpcomponents<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>httpclient<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>${test.framework.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        ...
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>build</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- 将程序包的最终名称设置为与测试用例文件夹的大小写相同. --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>finalName</span><span class="token punctuation">&gt;</span></span>httpclient-4.3.x-scenario<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>finalName</span><span class="token punctuation">&gt;</span></span>
        ....
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>build</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="如何实现心跳服务"><a href="#如何实现心跳服务" class="header-anchor">#</a> 如何实现心跳服务</h3> <p>心跳服务旨在检查服务可用状态。该服务是一个简单的HTTP服务，返回200表示目标服务已准备就绪。
然后，流量生成器将访问进入服务并验证预期数据。用户应考虑使用此服务来检测诸如相关服务是否已准备就绪，尤其是在相关服务是数据库或集群时。</p> <p>请注意，由于可以完整或部分跟踪心跳服务，因此, <code>expectedData.yaml</code>中的<code>segmentSize</code>(追踪段数量)应当使用 <code>ge</code>作为操作符,
并且不要在预期的追踪段数据中包含心跳服务的追踪段。</p> <h3 id="编写预期数据的示例过程"><a href="#编写预期数据的示例过程" class="header-anchor">#</a> 编写预期数据的示例过程</h3> <p>预期数据文件, <code>expectedData.yaml</code>, 包含 <code>SegmentItems</code>.</p> <p>我们正在使用HttpClient插件来展示如何写入期望的数据.</p> <p>测试有两个要点</p> <ol><li>是否创建HttpClient span。</li> <li>ContextCarrier是否正确创建，并在进程之间传播。</li></ol> <div class="language- extra-class"><pre class="language-text"><code>+-------------+         +------------------+            +-------------------------+
|   Browser   |         |  Case Servlet    |            | ContextPropagateServlet |
|             |         |                  |            |                         |
+-----|-------+         +---------|--------+            +------------|------------+
      |                           |                                  |
      |                           |                                  |
      |       WebHttp            +-+                                 |
      +------------------------&gt; |-|         HttpClient             +-+
      |                          |--------------------------------&gt; |-|
      |                          |-|                                |-|
      |                          |-|                                |-|
      |                          |-| &lt;--------------------------------|
      |                          |-|                                +-+
      | &lt;--------------------------|                                 |
      |                          +-+                                 |
      |                           |                                  |
      |                           |                                  |
      |                           |                                  |
      |                           |                                  |
      +                           +                                  +
</code></pre></div><h4 id="segmentitems"><a href="#segmentitems" class="header-anchor">#</a> segmentItems</h4> <p>通过遵循HttpClient用例的流程，应该创建两个追踪段。</p> <ol><li>一段代表 用例Servlet 访问。我们将其命名为<code>SegmentA</code>。</li> <li>一段代表ContextPropagateServlet访问。我们将其命名为<code>SegmentB</code>。</li></ol> <div class="language-yml extra-class"><pre class="language-yml"><code><span class="token key atrule">segmentItems</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">serviceName</span><span class="token punctuation">:</span> httpclient<span class="token punctuation">-</span>case
    <span class="token key atrule">segmentSize</span><span class="token punctuation">:</span> ge 2 <span class="token comment"># Could have more than one health check segments, because, the dependency is not standby.</span>
</code></pre></div><p>由于Tomcat插件是SkyWalking的默认插件，因此在SegmentA中有两个跨度</p> <ol><li>Tomcat 入口跨度(entry span)</li> <li>HttpClient 出口跨度(exit span)</li></ol> <p>SegmentA跨度列表应如下</p> <div class="language-yml extra-class"><pre class="language-yml"><code>    <span class="token punctuation">-</span> <span class="token key atrule">segmentId</span><span class="token punctuation">:</span> not null
      <span class="token key atrule">spans</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">operationName</span><span class="token punctuation">:</span> /httpclient<span class="token punctuation">-</span>case/case/context<span class="token punctuation">-</span>propagate
          <span class="token key atrule">parentSpanId</span><span class="token punctuation">:</span> <span class="token number">0</span>
          <span class="token key atrule">spanId</span><span class="token punctuation">:</span> <span class="token number">1</span>
          <span class="token key atrule">startTime</span><span class="token punctuation">:</span> nq 0
          <span class="token key atrule">endTime</span><span class="token punctuation">:</span> nq 0
          <span class="token key atrule">isError</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
          <span class="token key atrule">spanLayer</span><span class="token punctuation">:</span> Http
          <span class="token key atrule">spanType</span><span class="token punctuation">:</span> Exit
          <span class="token key atrule">componentId</span><span class="token punctuation">:</span> eq 2
          <span class="token key atrule">tags</span><span class="token punctuation">:</span>
            <span class="token punctuation">-</span> <span class="token punctuation">{</span><span class="token key atrule">key</span><span class="token punctuation">:</span> url<span class="token punctuation">,</span> <span class="token key atrule">value</span><span class="token punctuation">:</span> <span class="token string">'http://127.0.0.1:8080/httpclient-case/case/context-propagate'</span><span class="token punctuation">}</span>
            <span class="token punctuation">-</span> <span class="token punctuation">{</span><span class="token key atrule">key</span><span class="token punctuation">:</span> http.method<span class="token punctuation">,</span> <span class="token key atrule">value</span><span class="token punctuation">:</span> GET<span class="token punctuation">}</span>
          <span class="token key atrule">logs</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
          <span class="token key atrule">peer</span><span class="token punctuation">:</span> 127.0.0.1<span class="token punctuation">:</span><span class="token number">8080</span>
        <span class="token punctuation">-</span> <span class="token key atrule">operationName</span><span class="token punctuation">:</span> /httpclient<span class="token punctuation">-</span>case/case/httpclient
          <span class="token key atrule">parentSpanId</span><span class="token punctuation">:</span> <span class="token number">-1</span>
          <span class="token key atrule">spanId</span><span class="token punctuation">:</span> <span class="token number">0</span>
          <span class="token key atrule">startTime</span><span class="token punctuation">:</span> nq 0
          <span class="token key atrule">endTime</span><span class="token punctuation">:</span> nq 0
          <span class="token key atrule">spanLayer</span><span class="token punctuation">:</span> Http
          <span class="token key atrule">isError</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
          <span class="token key atrule">spanType</span><span class="token punctuation">:</span> Entry
          <span class="token key atrule">componentId</span><span class="token punctuation">:</span> <span class="token number">1</span>
          <span class="token key atrule">tags</span><span class="token punctuation">:</span>
            <span class="token punctuation">-</span> <span class="token punctuation">{</span><span class="token key atrule">key</span><span class="token punctuation">:</span> url<span class="token punctuation">,</span> <span class="token key atrule">value</span><span class="token punctuation">:</span> <span class="token string">'http://localhost:{SERVER_OUTPUT_PORT}/httpclient-case/case/httpclient'</span><span class="token punctuation">}</span>
            <span class="token punctuation">-</span> <span class="token punctuation">{</span><span class="token key atrule">key</span><span class="token punctuation">:</span> http.method<span class="token punctuation">,</span> <span class="token key atrule">value</span><span class="token punctuation">:</span> GET<span class="token punctuation">}</span>
          <span class="token key atrule">logs</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
          <span class="token key atrule">peer</span><span class="token punctuation">:</span> <span class="token null important">null</span>
</code></pre></div><p>SegmentB应该只有一个Tomcat跨度，但应包含指向SegmentA的Ref。</p> <p>SegmentB跨度列表应如下</p> <div class="language-yml extra-class"><pre class="language-yml"><code><span class="token punctuation">-</span> <span class="token key atrule">segmentId</span><span class="token punctuation">:</span> not null
  <span class="token key atrule">spans</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span>
   <span class="token key atrule">operationName</span><span class="token punctuation">:</span> /httpclient<span class="token punctuation">-</span>case/case/context<span class="token punctuation">-</span>propagate
   <span class="token key atrule">parentSpanId</span><span class="token punctuation">:</span> <span class="token number">-1</span>
   <span class="token key atrule">spanId</span><span class="token punctuation">:</span> <span class="token number">0</span>
   <span class="token key atrule">tags</span><span class="token punctuation">:</span>
   <span class="token punctuation">-</span> <span class="token punctuation">{</span><span class="token key atrule">key</span><span class="token punctuation">:</span> url<span class="token punctuation">,</span> <span class="token key atrule">value</span><span class="token punctuation">:</span> <span class="token string">'http://127.0.0.1:8080/httpclient-case/case/context-propagate'</span><span class="token punctuation">}</span>
   <span class="token punctuation">-</span> <span class="token punctuation">{</span><span class="token key atrule">key</span><span class="token punctuation">:</span> http.method<span class="token punctuation">,</span> <span class="token key atrule">value</span><span class="token punctuation">:</span> GET<span class="token punctuation">}</span>
   <span class="token key atrule">logs</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
   <span class="token key atrule">startTime</span><span class="token punctuation">:</span> nq 0
   <span class="token key atrule">endTime</span><span class="token punctuation">:</span> nq 0
   <span class="token key atrule">spanLayer</span><span class="token punctuation">:</span> Http
   <span class="token key atrule">isError</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
   <span class="token key atrule">spanType</span><span class="token punctuation">:</span> Entry
   <span class="token key atrule">componentId</span><span class="token punctuation">:</span> <span class="token number">1</span>
   <span class="token key atrule">peer</span><span class="token punctuation">:</span> <span class="token null important">null</span>
   <span class="token key atrule">refs</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token punctuation">{</span><span class="token key atrule">parentEndpoint</span><span class="token punctuation">:</span> /httpclient<span class="token punctuation">-</span>case/case/httpclient<span class="token punctuation">,</span> <span class="token key atrule">networkAddress</span><span class="token punctuation">:</span> <span class="token string">'localhost:8080'</span><span class="token punctuation">,</span> <span class="token key atrule">refType</span><span class="token punctuation">:</span> CrossProcess<span class="token punctuation">,</span> <span class="token key atrule">parentSpanId</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token key atrule">parentTraceSegmentId</span><span class="token punctuation">:</span> not null<span class="token punctuation">,</span> <span class="token key atrule">parentServiceInstance</span><span class="token punctuation">:</span> not null<span class="token punctuation">,</span> <span class="token key atrule">parentService</span><span class="token punctuation">:</span> not null<span class="token punctuation">,</span> <span class="token key atrule">traceId</span><span class="token punctuation">:</span> not null<span class="token punctuation">}</span>
</code></pre></div><h2 id="本地测试和提交"><a href="#本地测试和提交" class="header-anchor">#</a> 本地测试和提交</h2> <p>首先，测试用例项目可以成功编译，具有正确的项目结构并且可以部署。
开发人员应该测试启动脚本是否可以在Linux / MacOS中运行，并且 入口服务/健康检查服务 能够提供响应。</p> <p>您可以使用以下命令运行测试</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token builtin class-name">cd</span> <span class="token variable">${SKYWALKING_HOME}</span>
<span class="token function">bash</span> ./test/plugin/run.sh -f <span class="token variable">${scenario_name}</span>
</code></pre></div><p><strong>注意</strong>，如果 <code>./apm-sniffer</code> 中的代码被改变, 不管是因为您的更改还是git更新，
请重新编译 <code>skywalking-agent</code>模块。因为测试框架将使用现有的 <code>skywalking-agent</code> 文件夹,
而不是每次都重新编译它。</p> <p>使用 <code>${SKYWALKING_HOME}/test/plugin/run.sh -h</code> 了解更多命令选项。</p> <p>如果本地测试通过，则可以将其添加到 <code>.github/workflows/plugins-test.&lt;n&gt;.yaml</code> 文件, 它将驱动在官方SkyWalking存储库的Github Actions上运行的测试。
根据您的插件名称, 请按字母顺序将测试用例添加到<code>.github/workflows/plugins-test.&lt;n&gt;.yaml</code> 文件中。</p> <p>每个测试用例都是一个Github Actions作业(job)。请使用 <code>&lt;scenario name&gt; + &lt;version range&gt; + (&lt;supported version count&gt;)</code>作为作业(job)的 <code>title</code>, 并且方案目录作为作业的<code>name</code>,
通常，您只需要确定要在文件（<code>plugins-test。&lt;n&gt; .yaml</code>）中添加测试用例，并简单地在其中添加一行（如下所示），以现有用例为示例。</p> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token key atrule">jobs</span><span class="token punctuation">:</span>
  <span class="token key atrule">PluginsTest</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> Plugin
    <span class="token key atrule">runs-on</span><span class="token punctuation">:</span> ubuntu<span class="token punctuation">-</span><span class="token number">18.04</span>
    <span class="token key atrule">timeout-minutes</span><span class="token punctuation">:</span> <span class="token number">90</span>
    <span class="token key atrule">strategy</span><span class="token punctuation">:</span>
      <span class="token key atrule">fail-fast</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
      <span class="token key atrule">matrix</span><span class="token punctuation">:</span>
        <span class="token key atrule">case</span><span class="token punctuation">:</span>
          <span class="token comment"># ...</span>
          <span class="token punctuation">-</span> <span class="token punctuation">{</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> <span class="token string">'&lt;your case name&gt;'</span><span class="token punctuation">,</span> <span class="token key atrule">title</span><span class="token punctuation">:</span> <span class="token string">'&lt;PluginName, i.e. Spring&gt; (&lt;Supported Version Count, i.e 12&gt;)'</span> <span class="token punctuation">}</span> <span class="token comment"># &lt;&lt;== 按字母顺序插入一行</span>
          <span class="token comment"># ...</span>
</code></pre></div></div> <div class="page-edit"><!----> <!----></div> <!----> </div> <!----></div></div>
    <script src="/document-cn-translation-of-skywalking/assets/js/app.8a9ee25f.js" defer></script><script src="/document-cn-translation-of-skywalking/assets/js/320.ec15dc0a.js" defer></script>
  </body>
</html>
